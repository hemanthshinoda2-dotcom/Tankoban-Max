{
    "name": "tankoban-max",
    "version": "0.1.31",
    "private": true,
    "description": "Tankoban Max - Books + Comics + Videos",
    "main": "main.js",
    "scripts": {
        "prestart": "scripts\\windows\\ensure_deps_windows.bat",
        "start": "electron .",
        "start:shell": "electron apps/shell-app/main.js",
        "start:library": "electron apps/library-app/main.js",
        "start:comic": "electron apps/comic-reader-app/main.js",
        "start:book": "electron apps/book-reader-app/main.js",
        "start:audiobook": "electron apps/audiobook-app/main.js",
        "start:video": "electron apps/video-player-app/main.js",
        "start:browser": "electron apps/browser-app/main.js",
        "start:torrent": "electron apps/torrent-app/main.js",
        "predist": "scripts\\windows\\ensure_deps_windows.bat",
        "dist": "npm run release:prep && electron-builder",
        "dist:with-static-media": "npm run release:prep && electron-builder --config.extraMetadata.buildProfile=with-static-media --config.asarUnpack[0]=node_modules/node-unrar-js/** --config.asarUnpack[1]=node_modules/ffmpeg-static/** --config.asarUnpack[2]=node_modules/ffprobe-static/**",
        "prepack": "scripts\\windows\\ensure_deps_windows.bat",
        "pack": "npm run release:prep && electron-builder --dir",
        "pack:folder": "electron-packager . \"Tankoban Max\" --platform=win32 --arch=x64 --out=dist --overwrite --asar --asar.unpackDir=\"resources/mpv\" --icon=build/icon.ico",
        "zip:folder": "powershell -NoProfile -ExecutionPolicy Bypass -Command \"if(Test-Path dist\\\\Tankoban Max-win32-x64.zip){Remove-Item dist\\\\Tankoban Max-win32-x64.zip -Force}; Compress-Archive -Path 'dist\\\\Tankoban Max-win32-x64\\\\*' -DestinationPath 'dist\\\\Tankoban Max-win32-x64.zip'\"",
        "doctor": "node tools/doctor.js",
        "map": "node tools/repo_map.js",
        "smoke": "node tools/smoke_check.js",
        "smoke:library": "node tools/section_smoke.js --section=library",
        "smoke:comic": "node tools/section_smoke.js --section=comic",
        "smoke:book": "node tools/section_smoke.js --section=book",
        "smoke:audiobook": "node tools/section_smoke.js --section=audiobook",
        "smoke:video": "node tools/section_smoke.js --section=video",
        "smoke:browser": "node tools/section_smoke.js --section=browser",
        "smoke:torrent": "node tools/section_smoke.js --section=torrent",
        "smoke:all": "npm run smoke:library && npm run smoke:comic && npm run smoke:book && npm run smoke:audiobook && npm run smoke:video && npm run smoke:browser && npm run smoke:torrent",
        "test:section": "node tools/section_test_harness.js",
        "test:section:library": "node tools/section_test_harness.js --section=library",
        "test:section:comic": "node tools/section_test_harness.js --section=comic",
        "test:section:book": "node tools/section_test_harness.js --section=book",
        "test:section:audiobook": "node tools/section_test_harness.js --section=audiobook",
        "test:section:video": "node tools/section_test_harness.js --section=video",
        "test:section:browser": "node tools/section_test_harness.js --section=browser",
        "test:section:torrent": "node tools/section_test_harness.js --section=torrent",
        "test:sections": "node tools/section_test_harness.js --all",
        "boundaries:check": "node tools/enforce_feature_boundaries.js",
        "fixtures:write": "node tools/fixture_manifest.js --write",
        "fixtures:check": "node tools/fixture_manifest.js --check",
        "ipc:contracts": "node tools/ipc_contract_check.js",
        "typecheck:core": "node node_modules/typescript/bin/tsc -p tsconfig.core.json --noEmit",
        "impact:plan": "node tools/impact_map.js",
        "impact:plan:staged": "node tools/impact_map.js --staged",
        "impact:run": "node tools/impact_map.js --run",
        "docs:sync": "node tools/generate_agent_docs.js",
        "docs:verify-sync": "node tools/verify_agent_docs.js",
        "quality:check": "npm run boundaries:check && npm run fixtures:check && npm run ipc:check && npm run ipc:contracts && npm run smoke:all && npm run docs:verify-sync && npm run typecheck:core",
        "ipc:check": "node tools/ipc_sync_check.js",
        "phase8:verify": "node tools/books_phase8_verify.js",
        "build:player": "cd player_qt && build_player.bat",
        "validate:player": "node tools/validate_player_artifacts.js",
        "release:prep": "node tools/release_prep.js",
        "fetch:tor": "node tools/fetch_tor.js",
        "fetch:mpv": "scripts\\windows\\ensure_mpv_windows.bat",
        "visual:browser:baseline": "electron tools/visual-qa/browser_ui_visual_qa.js capture-baseline",
        "visual:browser:capture": "electron tools/visual-qa/browser_ui_visual_qa.js capture-current",
        "visual:browser:compare": "node tools/visual-qa/browser_ui_compare.js",
        "visual:browser:ci": "npm run visual:browser:capture && npm run visual:browser:compare",
        "browser:parity:baseline": "node tools/browser_parity_baseline.js",
        "browser:stability:scan": "node tools/browser_stability_log_scan.js",
        "browser:nav:audit": "node tools/browser_nav_shortcut_audit.js",
        "browser:tabs:audit": "node tools/browser_tabs_polish_audit.js",
        "browser:omni:audit": "node tools/browser_omni_build7_audit.js"
    },
    "devDependencies": {
        "electron": "^40.6.0",
        "electron-builder": "24.13.3",
        "electron-packager": "17.1.2"
    },
    "build": {
        "appId": "com.tankoban.max",
        "productName": "Tankoban Max",
        "directories": {
            "output": "dist"
        },
        "files": [
            "main.js",
            "library_scan_worker.js",
            "books_scan_worker.js",
            "video_scan_worker.js",
            "workers/**/*",
            "preload.js",
            "main/**/*",
            "preload/**/*",
            "shared/**/*",
            "resources/**/*",
            "!resources/mpv/**/*",
            "build/**/*",
            "src/**/*",
            "package.json"
        ],
        "asar": true,
        "asarUnpack": [
            "node_modules/node-unrar-js/**"
        ],
        "win": {
            "target": [
                {
                    "target": "nsis",
                    "arch": [
                        "x64"
                    ]
                },
                {
                    "target": "portable",
                    "arch": [
                        "x64"
                    ]
                }
            ],
            "icon": "build/icon.ico"
        },
        "fileAssociations": [
            {
                "ext": "cbz",
                "name": "CBZ",
                "description": "Comic Book ZIP Archive",
                "role": "Viewer"
            },
            {
                "ext": "cbr",
                "name": "CBR",
                "description": "Comic Book RAR Archive",
                "role": "Viewer"
            },
            {
                "ext": "mp4",
                "name": "MP4 Video",
                "description": "MPEG-4 Video",
                "role": "Viewer"
            },
            {
                "ext": "mkv",
                "name": "MKV Video",
                "description": "Matroska Video",
                "role": "Viewer"
            },
            {
                "ext": "avi",
                "name": "AVI Video",
                "description": "AVI Video",
                "role": "Viewer"
            },
            {
                "ext": "mov",
                "name": "MOV Video",
                "description": "QuickTime Video",
                "role": "Viewer"
            },
            {
                "ext": "m4v",
                "name": "M4V Video",
                "description": "MPEG-4 Video",
                "role": "Viewer"
            },
            {
                "ext": "webm",
                "name": "WebM Video",
                "description": "WebM Video",
                "role": "Viewer"
            },
            {
                "ext": "ts",
                "name": "TS Video",
                "description": "MPEG Transport Stream",
                "role": "Viewer"
            },
            {
                "ext": "m2ts",
                "name": "M2TS Video",
                "description": "Blu-ray Transport Stream",
                "role": "Viewer"
            },
            {
                "ext": "wmv",
                "name": "WMV Video",
                "description": "Windows Media Video",
                "role": "Viewer"
            },
            {
                "ext": "flv",
                "name": "FLV Video",
                "description": "Flash Video",
                "role": "Viewer"
            },
            {
                "ext": "mpeg",
                "name": "MPEG Video",
                "description": "MPEG Video",
                "role": "Viewer"
            },
            {
                "ext": "mpg",
                "name": "MPG Video",
                "description": "MPEG Video",
                "role": "Viewer"
            },
            {
                "ext": "3gp",
                "name": "3GP Video",
                "description": "3GPP Video",
                "role": "Viewer"
            },
            {
                "description": "EPUB eBook",
                "name": "EPUB",
                "ext": "epub",
                "role": "Viewer"
            },
            {
                "description": "PDF Document",
                "name": "PDF",
                "ext": "pdf",
                "role": "Viewer"
            },
            {
                "description": "Text Document",
                "name": "TXT",
                "ext": "txt",
                "role": "Viewer"
            }
        ],
        "nsis": {
            "oneClick": false,
            "perMachine": true,
            "allowToChangeInstallationDirectory": true,
            "artifactName": "${productName}-Setup-${version}.${ext}"
        },
        "portable": {
            "artifactName": "${productName}-${version}-${arch}-Portable.${ext}"
        },
        "extraResources": [
            {
                "from": "resources/mpv/windows",
                "to": "mpv/windows"
            },
            {
                "from": "player_qt/dist/TankobanPlayer",
                "to": "player/TankobanPlayer"
            },
            {
                "from": "resources/tor/windows",
                "to": "tor/windows"
            }
        ]
    },
    "dependencies": {
        "@shoelace-style/shoelace": "^2.20.1",
        "epubjs": "^0.3.93",
        "lucide": "^0.566.0",
        "msedge-tts": "^2.0.4",
        "music-metadata": "^11.12.1",
        "node-unrar-js": "^2.0.2",
        "pdfjs-dist": "^3.11.174",
        "webtorrent": "^2.8.5",
        "ws": "^8.18.0"
    },
    "productName": "Tankoban Max"
}
